# 异常与中断的概念及处理流程

## 1.1 中断的引入

### 1.1.1 妈妈怎么知道孩子醒了

![img](data:image/png;base64,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)

图 17.1 妈妈和孩子

妈妈怎么知道卧室里小孩醒了？

①  查询方式：时不时进房间看一下

简单，但是累

②  休眠-唤醒：进去房间陪小孩一起睡觉，小孩醒了会吵醒她 

不累，但是妈妈干不了活了

③  poll方式：妈妈要干很多活，但是可以陪小孩睡一会，定个闹钟

要浪费点时间，但是可以继续干活。

妈妈要么是被小孩吵醒，要么是被闹钟吵醒。

④  异步通知：妈妈在客厅干活，小孩醒了他会自己走出房门告诉妈妈

妈妈、小孩互不耽误。

后面的3种方式，都需要“小孩来中断妈妈”：中断她的睡眠、中断她的工作。实际上，能“中断”妈妈的事情可多了：

①  发生了各种声音

②  可忽略的远处猫叫

③  快递员按门铃

④  卧室中小孩哭了

妈妈当前正在看书，被这些事件“中断”后她会怎么做？流程如下：

第1步 先在书中放入书签，合上书

第2步 去处理，对于不同的情况，处理方法不同：

-  对于门铃：开门取快递


-  对于哭声：照顾小孩


第3步 回来继续看书

### 1.1.2 嵌入系统中也有类似的情况

![img](data:image/png;base64,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)

图 17.2 中断与异常

CPU在运行的过程中，也会被各种“异常”打断。这些“异常”有：

①  指令未定义

②  指令、数据访问有问题

③  SWI(软中断)

④  快中断

⑤  中断

中断也属于一种“异常”，导致中断发生的情况有很多，比如：

-  按键


-  定时器


-  ADC转换完成


-  UART发送完数据、收到数据


-  等等


这些众多的“中断源”，汇集到“中断控制器”，由“中断控制器”选择优先级最高的中断并通知CPU。

## 1.2 中断的处理流程

arm对异常(中断)处理过程：

①  初始化：

a)   设置中断源，让它可以产生中断

b)   设置中断控制器(可以屏蔽某个中断，优先级)

c)   设置CPU总开关(使能中断)

②  执行其他程序：正常程序

③  产生中断：比如按下按键--->中断控制器--->CPU

④  CPU 每执行完一条指令都会检查有无中断/异常产生

⑤  CPU发现有中断/异常产生，开始处理。

对于不同的异常，跳去不同的地址执行程序。

这地址上，只是一条跳转指令，跳去执行某个函数(地址)，这个就是异常向量。③④⑤都是硬件做的。

⑥  这些函数做什么事情？

软件做的:

a)   保存现场(各种寄存器)

b)   处理异常(中断):分辨中断源，再调用不同的处理函数

c)   恢复现场

## 1.3 异常向量表

u-boot或是Linux内核，都有类似如下的代码：

```
_start: b	reset
	ldr	pc, _undefined_instruction
	ldr	pc, _software_interrupt
	ldr	pc, _prefetch_abort
	ldr	pc, _data_abort
	ldr	pc, _not_used
	ldr	pc, _irq //发生中断时，CPU跳到这个地址执行该指令 **假设地址为0x18**
	ldr	pc, _fiq
```

这就是异常向量表，每一条指令对应一种异常。

发生复位时，CPU就去 执行第1条指令：b reset。

发生中断时，CPU就去执行“ldr pc, _irq”这条指令。

这些指令存放的位置是固定的，比如对于ARM9芯片中断向量的地址是0x18。

当发生中断时，CPU就强制跳去执行0x18处的代码。

在向量表里，一般都是放置一条跳转指令，发生该异常时，CPU就会执行向量表中的跳转指令，去调用更复杂的函数。

当然，向量表的位置并不总是从0地址开始，很多芯片可以设置某个vector base寄存器，指定向量表在其他位置，比如设置vector base为0x80000000，指定为DDR的某个地址。但是表中的各个异常向量的偏移地址，是固定的：复位向量偏移地址是0，中断是0x18。

## 1.4 参考资料

对于ARM的中断控制器，述语上称之为GIC (Generic Interrupt Controller)，到目前已经更新到v4版本了。

各个版本的差别可以看这里：

[**https://developer.arm.com/ip-products/system-ip/system-controllers/interrupt-controllers**](https://developer.arm.com/ip-products/system-ip/system-controllers/interrupt-controllers)

简单地说，GIC v3/v4用于 ARMv8 架构，即64位ARM芯片。

而GIC v2用于ARMv7和其他更低的架构。

以后在驱动大全里讲解中断时，我们再深入分析，到时会涉及单核、多核等知识。